В результате выполнения задания, был создан микросервис counter_app, который предоставляет API для управления счетчиком. Так как нагрузка будет большой, выбрал tarantool как хранилище данных.

Описание SAGA:
1. Пользователь посылает сообщение другому пользователю.
2. Сервис диалогов создает диалог между пользователями.
3. Сервис диалогов через rabbitMq отправляет сообщение сервису счетчиков, что нужно инкрементировать счетчик.
4. Сервис счетчиков увеличивает счетчик непрочитанных сообщений у получателя.
5. Сервис диалогов отправляет сообщение.
6. Пользователь диалога получает сообщения их диалога.
7. Сервис диалогов помечает сообщение как прочитанное.
8. Сервис диалогов через rabbitMq отправляет сообщение сервису счетчиков, что сообщения прочитаны.
9. Сервис счетчиков уменьшает счетчик непрочитанных сообщений (на соответству) у получателя.

В случае ошибки на 8-9 этапах, сервис счетчика отправит сообщение в очередь, которую прочитает сервис диалогов и откатит изменения в бд.